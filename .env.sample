# ============================================================================
#
#  Environment Variables for Real-Time Voice Agent Accelerator
#
# ============================================================================
#
# ðŸ“Œ WHEN TO USE THIS FILE:
#
#   This file is ONLY needed for:
#
#   1. LOCAL DEVELOPMENT - Running the app locally (not in Azure)
#   2. OVERRIDE MODE - Bypassing Azure App Configuration values
#   3. SECRETS - Values that cannot be stored in App Config (connection strings, keys)
#
# ðŸ“Œ PRODUCTION DEPLOYMENTS:
#
#   For Azure deployments, most settings are managed via:
#     - Azure App Configuration (config/appconfig.json â†’ synced via postprovision)
#     - Azure Key Vault (secrets referenced by App Config)
#     - Container Apps environment variables (set by Terraform)
#
#   Run `azd up` and these are configured automatically.
#
# ðŸ“Œ HOW TO USE:
#
#   1. Copy this file: cp .env.sample .env
#   2. Fill in REQUIRED values (marked with # REQUIRED)
#   3. Optionally override defaults
#
# ðŸ“Œ CONFIGURATION HIERARCHY (highest priority wins):
#
#   1. Environment variables (.env or shell)
#   2. Azure App Configuration (if connected)
#   3. Hardcoded defaults in code
#
# ============================================================================


# ============================================================================
# REQUIRED: Azure Identity
# ============================================================================
# Get these from Azure Portal or `azd env get-values` after deployment

AZURE_TENANT_ID=                                    # Azure AD tenant ID
AZURE_SUBSCRIPTION_ID=                              # Azure subscription ID


# ============================================================================
# REQUIRED: Azure OpenAI
# ============================================================================
# Your Azure OpenAI resource endpoint and deployments

AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com/
AZURE_OPENAI_KEY=                                   # API key (or use managed identity)
AZURE_OPENAI_CHAT_DEPLOYMENT_ID=gpt-4o              # Your chat model deployment


# ============================================================================
# REQUIRED: Azure Speech Services
# ============================================================================
# Must use a custom domain endpoint (not regional endpoint) for STT/TTS

AZURE_SPEECH_ENDPOINT=https://your-resource.cognitiveservices.azure.com/
AZURE_SPEECH_KEY=                                   # Speech service API key
AZURE_SPEECH_REGION=eastus                          # Region must match endpoint


# ============================================================================
# REQUIRED: Azure Communication Services (for telephony)
# ============================================================================
# Skip if only using browser-based voice (no phone calls)

ACS_CONNECTION_STRING=endpoint=https://your-acs.communication.azure.com/;accesskey=...
ACS_ENDPOINT=https://your-acs.communication.azure.com
ACS_SOURCE_PHONE_NUMBER=+1234567890                 # E.164 format


# ============================================================================
# REQUIRED: Redis (session management)
# ============================================================================

REDIS_HOST=your-redis.redis.azure.net
REDIS_PORT=6380
REDIS_PASSWORD=                                     # Or REDIS_ACCESS_KEY


# ============================================================================
# REQUIRED: Azure Storage (recordings, audio)
# ============================================================================

AZURE_STORAGE_CONNECTION_STRING=DefaultEndpointsProtocol=https;AccountName=...
AZURE_BLOB_CONTAINER=acs


# ============================================================================
# REQUIRED: Cosmos DB (conversation history)
# ============================================================================

AZURE_COSMOS_CONNECTION_STRING=mongodb+srv://...
AZURE_COSMOS_DATABASE_NAME=audioagentdb
AZURE_COSMOS_COLLECTION_NAME=audioagentcollection


# ============================================================================
# REQUIRED: Application Insights (telemetry)
# ============================================================================

APPLICATIONINSIGHTS_CONNECTION_STRING=InstrumentationKey=...


# ============================================================================
# REQUIRED (Local Dev): Base URL for webhooks
# ============================================================================
# For local development, use a Dev Tunnel or ngrok URL

BASE_URL=https://your-tunnel.devtunnels.ms


# ============================================================================
# OPTIONAL: Application Settings
# ============================================================================
# These have sensible defaults. Override only if needed.
# For production, prefer setting these in config/appconfig.json instead.

ENVIRONMENT=development                             # development | staging | production
LOG_LEVEL=INFO                                      # DEBUG | INFO | WARNING | ERROR
PORT=8080                                           # Server port


# ============================================================================
# OPTIONAL: Pool Configuration
# ============================================================================
# Defaults are configured in config/appconfig.json for production.
# Override here ONLY for local testing with different settings.

# POOL_SIZE_TTS=100                                 # TTS client pool size
# POOL_SIZE_STT=100                                 # STT client pool size
# AOAI_POOL_SIZE=50                                 # AOAI client pool size


# ============================================================================
# OPTIONAL: Voice Configuration
# ============================================================================
# Defaults are in config/appconfig.json

# TTS_SAMPLE_RATE_UI=48000                          # TTS sample rate for browser
# TTS_SAMPLE_RATE_ACS=16000                         # TTS sample rate for telephony
# SILENCE_DURATION_MS=1300                          # VAD silence threshold


# ============================================================================
# OPTIONAL: Feature Flags
# ============================================================================
# Defaults are in config/appconfig.json. Override for local testing.

# ENABLE_AUTH_VALIDATION=false                      # Require authentication
# ENABLE_ACS_CALL_RECORDING=false                   # Record calls
# ENABLE_TRACING=true                               # Distributed tracing


# ============================================================================
# OPTIONAL: Azure Voice Live (preview)
# ============================================================================
# Only needed if using Azure Voice Live API instead of STT/LLM/TTS pipeline
# These values are auto-populated from AI Foundry when enable_voice_live=true

# AZURE_VOICELIVE_ENDPOINT=https://your-ai-foundry.cognitiveservices.azure.com/
# AZURE_VOICELIVE_MODEL=gpt-realtime
# AZURE_VOICELIVE_RESOURCE_ID=
# AZURE_VOICELIVE_API_KEY=


# ============================================================================
# OPTIONAL: Azure AI Foundry (for AI Foundry Agents)
# ============================================================================

# AZURE_AI_FOUNDRY_ENDPOINT=https://your-foundry.services.ai.azure.com/...
# AI_FOUNDRY_AGENT_ID=


# ============================================================================
# OPTIONAL: Azure AI Search (for RAG)
# ============================================================================

# AZURE_AI_SEARCH_SERVICE_ENDPOINT=https://your-search.search.windows.net
# AZURE_SEARCH_INDEX_NAME=your-index
# AZURE_OPENAI_EMBEDDING_DEPLOYMENT=text-embedding-3-large


# ============================================================================
# DEBUG: Tracing (high-volume, use only for debugging)
# ============================================================================

# STREAM_TRACING=false                              # Audio stream tracing (verbose!)
# AOAI_TRACING=false                                # AOAI call tracing
# HIGH_FREQ_SAMPLING=0.1                            # Sampling rate for high-freq traces
