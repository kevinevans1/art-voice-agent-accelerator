# ═══════════════════════════════════════════════════════════════════════════════
# Investment Advisor Agent - Unified Schema
# ═══════════════════════════════════════════════════════════════════════════════
# Retirement and investment specialist for 401(k), IRA, and rollover guidance
# Works with both SpeechCascade and VoiceLive orchestrators
# ═══════════════════════════════════════════════════════════════════════════════

name: InvestmentAdvisor
description: Retirement accounts, 401(k) rollovers, IRA guidance, investment products

# ─────────────────────────────────────────────────────────────────────────────
# Handoff Configuration
# ─────────────────────────────────────────────────────────────────────────────
handoff:
  trigger: handoff_investment_advisor  # Other agents call this to reach InvestmentAdvisor

greeting: |
  {% if caller_name %}Hi {{ caller_name }}, I'm the retirement and investment specialist. Let me help you with your accounts.
  {% else %}Hi, I'm the retirement and investment specialist. Let me help you with your accounts.
  {% endif %}
return_greeting: "Welcome back. What else about your retirement or investments?"

# ─────────────────────────────────────────────────────────────────────────────
# Voice Configuration
# ─────────────────────────────────────────────────────────────────────────────
voice:
  name: en-US-AlloyTurboMultilingualNeural
  type: azure-standard
  rate: "-4%"

# ─────────────────────────────────────────────────────────────────────────────
# Model Configuration (LLM for agent reasoning)
# ─────────────────────────────────────────────────────────────────────────────
voicelive_model:
  deployment_id: gpt-realtime
  temperature: 0.7

cascade_model:
  deployment_id: gpt-4o
  temperature: 0.8

# ─────────────────────────────────────────────────────────────────────────────
# Session Configuration (VoiceLive Mode Only)
# ─────────────────────────────────────────────────────────────────────────────
session:
  modalities: [TEXT, AUDIO]
  input_audio_format: PCM16
  output_audio_format: PCM16

  input_audio_transcription_settings:
    model: gpt-4o-transcribe
    language: en-US

  turn_detection:
    type: azure_semantic_vad
    threshold: 0.5
    prefix_padding_ms: 240
    silence_duration_ms: 720

  tool_choice: auto

# ─────────────────────────────────────────────────────────────────────────────
# Speech Configuration (Cascade Mode Only)
# ─────────────────────────────────────────────────────────────────────────────
speech:
  recognition:
    language: en-US
  synthesis:
    voice_name: en-US-EchoTurboMultilingualNeural
  vad:
    threshold: 0.02
    silence_duration_ms: 700
    prefix_padding_ms: 200

# ─────────────────────────────────────────────────────────────────────────────
# Tools (referenced by name from shared registry)
# ─────────────────────────────────────────────────────────────────────────────
tools:
  # Retirement Data
  - get_retirement_accounts
  - get_401k_details
  - get_rollover_options
  - calculate_tax_impact
  
  # Knowledge Base
  - search_rollover_guidance
  
  # Account Info
  - get_account_routing_info
  - get_account_summary
  
  # Handoffs
  - handoff_bank_advisor
  - handoff_card_recommendation
  - handoff_concierge
  
  # Escalation
  - escalate_human
  - escalate_emergency

# ─────────────────────────────────────────────────────────────────────────────
# Prompt (file reference)
# ─────────────────────────────────────────────────────────────────────────────
prompts:
  path: prompt.jinja
