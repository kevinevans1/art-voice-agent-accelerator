# ═══════════════════════════════════════════════════════════════════════════════
# Policy Advisor Agent - Insurance Policy Management
# ═══════════════════════════════════════════════════════════════════════════════
# Specialized agent for policy questions, changes, renewals, and cancellations
# Handles auto, home, health, life, and other insurance policies
# ═══════════════════════════════════════════════════════════════════════════════

name: PolicyAdvisor
description: Insurance policy advisor who helps customers with policy changes, renewals, and questions

greeting: |
  {% if caller_name %}Hi {{ caller_name }}, I'm your policy advisor. I can help you make changes to your policy, answer questions about your coverage, or assist with renewals. What would you like to do today?
  {% else %}Hello, I'm your policy advisor. I can help you make changes to your policy, answer questions about your coverage, or assist with renewals. How can I assist you?
  {% endif %}

return_greeting: |
  {% if caller_name %}{{ caller_name }}, is there anything else I can help you with regarding your policy?
  {% else %}Is there anything else about your policy I can help with?
  {% endif %}

# ─────────────────────────────────────────────────────────────────────────────
# Handoff Configuration
# ─────────────────────────────────────────────────────────────────────────────
handoff:
  trigger: handoff_policy_advisor
  is_entry_point: false

# ─────────────────────────────────────────────────────────────────────────────
# Voice Configuration
# ─────────────────────────────────────────────────────────────────────────────
voice:
  name: en-US-AvaMultilingualNeural
  type: azure-standard
  rate: "-4%"

# ─────────────────────────────────────────────────────────────────────────────
# Model Configuration (LLM for agent reasoning)
# ─────────────────────────────────────────────────────────────────────────────
voicelive_model:
  deployment_id: gpt-realtime
  temperature: 0.7
  max_tokens: 250

cascade_model:
  deployment_id: gpt-4o
  temperature: 0.7
  max_tokens: 150

# ─────────────────────────────────────────────────────────────────────────────
# Session Configuration (VoiceLive Mode Only)
# ─────────────────────────────────────────────────────────────────────────────
session:
  modalities: [TEXT, AUDIO]
  input_audio_format: PCM16
  output_audio_format: PCM16

  input_audio_transcription_settings:
    model: gpt-4o-transcribe
    language: en-US

  turn_detection:
    type: azure_semantic_vad
    threshold: 0.5
    prefix_padding_ms: 240
    silence_duration_ms: 720

  tool_choice: auto

# ─────────────────────────────────────────────────────────────────────────────
# Speech Configuration (Cascade Mode Only)
# ─────────────────────────────────────────────────────────────────────────────
speech:
  recognition:
    language: en-US

  synthesis:
    voice_name: en-US-Ava:DragonHDLatestNeural

  vad:
    threshold: 0.02
    silence_duration_ms: 700
    prefix_padding_ms: 200

# ─────────────────────────────────────────────────────────────────────────────
# Tools (Handoffs & Functions)
# ─────────────────────────────────────────────────────────────────────────────
tools:
  # Handoffs to other agents (Insurance scenario)
  - handoff_fnol_agent              # Transfer to FNOL for claims
  
  # Escalation
  - escalate_human
  - escalate_emergency

  # Policy-specific tools (query user's loaded profile data)
  - search_policy_info              # Search user's policies for specific info
  - get_policy_details              # Get full details of a specific policy
  - list_user_policies              # List all user's policies
  - check_coverage                  # Check if user has specific coverage
  - get_claims_summary              # Get summary of user's claims

  # Generic knowledge retrieval (for general insurance questions)
  - search_knowledge_base

# ─────────────────────────────────────────────────────────────────────────────
# Template Variables
# ─────────────────────────────────────────────────────────────────────────────
template_vars:
  institution_name: "XYMZ Insurance"
  agent_name: "PolicyAdvisor"
  industry: "insurance"

# ─────────────────────────────────────────────────────────────────────────────
# Prompt Template Path
# ─────────────────────────────────────────────────────────────────────────────
prompts:
  path: prompt.jinja
