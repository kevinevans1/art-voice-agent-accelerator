# ═══════════════════════════════════════════════════════════════════════════════
# Utilities Concierge Agent
# ═══════════════════════════════════════════════════════════════════════════════
# Primary customer-facing agent for domestic utilities provider.
# Handles general inquiries and routes to specialists.
# ═══════════════════════════════════════════════════════════════════════════════

name: UtilitiesConcierge
description: Primary utilities assistant - handles inquiries and routes to specialists

handoff:
  trigger: handoff_concierge

greeting: |
  {% if customer_name and utility_name %}Hi {{ customer_name }}, thanks for calling {{ utility_name }}. I'm {{ agent_name | default('your virtual assistant') }}. How can I help you today?
  {% elif customer_name %}Hi {{ customer_name }}, I'm {{ agent_name | default('your virtual assistant') }}. How can I help you today?
  {% elif utility_name %}Thanks for calling {{ utility_name }}. I'm {{ agent_name | default('your virtual assistant') }}. How can I help you today?
  {% else %}Hi, I'm {{ agent_name | default('your virtual assistant') }}. How can I help you today?
  {% endif %}

return_greeting: |
  {% if customer_name %}Welcome back, {{ customer_name }}. Is there anything else I can help you with?
  {% else %}Welcome back. Is there anything else I can help you with?
  {% endif %}

# ─────────────────────────────────────────────────────────────────────────────
# Voice Configuration
# ─────────────────────────────────────────────────────────────────────────────
voice:
  name: en-US-AvaMultilingualNeural
  type: azure-standard
  rate: "-4%"

# ─────────────────────────────────────────────────────────────────────────────
# Model Configuration
# ─────────────────────────────────────────────────────────────────────────────
voicelive_model:
  deployment_id: gpt-realtime
  temperature: 0.7
  max_tokens: 2048

cascade_model:
  deployment_id: gpt-4o
  temperature: 0.7
  max_tokens: 2048

# ─────────────────────────────────────────────────────────────────────────────
# Session Configuration (VoiceLive Mode)
# ─────────────────────────────────────────────────────────────────────────────
session:
  modalities: [TEXT, AUDIO]
  input_audio_format: PCM16
  output_audio_format: PCM16
  
  input_audio_transcription_settings:
    model: gpt-4o-transcribe
    language: en-US

  turn_detection:
    type: azure_semantic_vad
    threshold: 0.5
    prefix_padding_ms: 240
    silence_duration_ms: 720

  tool_choice: auto

# ─────────────────────────────────────────────────────────────────────────────
# Tools
# ─────────────────────────────────────────────────────────────────────────────
tools:
  # Identity & Account
  - verify_customer_identity
  - get_account_info
  - get_service_address
  
  # Quick Actions
  - get_current_bill
  - get_payment_status
  - check_outage_status
  
  # Handoffs to Specialists
  - handoff_billing_agent        # Billing questions, disputes, payment plans
  - handoff_outage_agent         # Report/check outages
  - handoff_service_agent        # Service changes, new service
  - handoff_usage_agent          # Usage analysis, efficiency
  
  # Omnichannel
  - check_queue_status
  - offer_channel_switch
  - execute_channel_handoff
  
  # Escalation
  - escalate_human
  - schedule_callback

# ─────────────────────────────────────────────────────────────────────────────
# Prompt
# ─────────────────────────────────────────────────────────────────────────────
prompts:
  path: prompt.jinja
