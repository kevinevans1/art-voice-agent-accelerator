# ═══════════════════════════════════════════════════════════════════════════════
# Compliance Desk Agent - Unified Schema
# ═══════════════════════════════════════════════════════════════════════════════
# AML/FATCA verification, sanctions screening, regulatory review
# Works with both SpeechCascade and VoiceLive orchestrators
# ═══════════════════════════════════════════════════════════════════════════════

name: ComplianceDesk
description: AML, FATCA, sanctions screening, and regulatory compliance verification

greeting: "Compliance desk online. I can review AML, sanctions, and regulatory requirements before your transaction proceeds. What do you need me to confirm?"
return_greeting: "Welcome back to compliance. Let me know any new details and we'll finish the review."

# ─────────────────────────────────────────────────────────────────────────────
# Handoff Configuration
# ─────────────────────────────────────────────────────────────────────────────
handoff:
  trigger: handoff_compliance_desk
  transition_message: "Let me review the compliance requirements for your transaction."

# ─────────────────────────────────────────────────────────────────────────────
# Voice Configuration
# ─────────────────────────────────────────────────────────────────────────────
voice:
  name: en-US-EchoTurboMultilingualNeural
  type: azure-standard
  rate: "-4%"

# ─────────────────────────────────────────────────────────────────────────────
# Session Configuration (VoiceLive-specific)
# ─────────────────────────────────────────────────────────────────────────────
session:
  modalities: [TEXT, AUDIO]
  input_audio_format: PCM16
  output_audio_format: PCM16

  turn_detection:
    type: azure_semantic_vad
    threshold: 0.5
    prefix_padding_ms: 240
    silence_duration_ms: 720

  tool_choice: auto

# ─────────────────────────────────────────────────────────────────────────────
# Tools (referenced by name from shared registry)
# ─────────────────────────────────────────────────────────────────────────────
tools:
  # Compliance Verification
  - get_client_data
  - check_compliance_status
  - search_knowledge_base
  
  # Handoffs (tool-based strategy)
  - handoff_to_trading              # Complex FX or execution needs
  - handoff_transfer_agency_agent   # Return to transfer agency
  - handoff_concierge         # Return to main concierge
  
  # Escalation
  - escalate_emergency
  - escalate_human

# ─────────────────────────────────────────────────────────────────────────────
# Prompt (file reference)
# ─────────────────────────────────────────────────────────────────────────────
prompts:
  path: prompt.jinja
